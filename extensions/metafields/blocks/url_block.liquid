{% assign metafield_namespace = block.settings.namespace %}
{% assign metafield_key = block.settings.key %}

{% assign metafield_value = block.settings.product.metafields[metafield_namespace][metafield_key] %}

{% if metafield_value %}
  <a href="{{ metafield_value.value }}" target="_blank" style="
      font-size: {{ block.settings.text_size }}; 
      font-weight: {{ block.settings.font_weight }};
      background-color: {{ block.settings.background_color }}; 
      padding: 10px; 
      border-radius: 5px;">
    {{ block.settings.link_text }}
  </a>
{% else %}
  <span>No data available</span>
{% endif %}

{% schema %}
{
  "name": "URL",
  "target": "section",
  "settings": [
    { "type": "product", "id": "product", "label": "Product", "autofill": true },
    { "type": "text", "id": "namespace", "label": "Metafield Namespace", "default": "url_namespace" },
    { "type": "text", "id": "key", "label": "Metafield Key", "default": "url_key" },
    { "type": "text", "id": "link_text", "label": "Link Text", "default": "Visit Link" },
    { "type": "select", "id": "font_weight", "label": "Font Weight", "options": [
        { "value": "normal", "label": "Normal" },
        { "value": "bold", "label": "Bold" }
      ], "default": "normal" },
    { "type": "text", "id": "text_size", "label": "Text Size", "default": "16px" },
    { "type": "color", "id": "background_color", "label": "Background Color", "default": "#FFFFFF" }
  ]
}
{% endschema %}
